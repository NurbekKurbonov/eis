{% extends '03_foydalanuvchi/00_base.html' %}
{% block title %} {{titleown}} {% endblock title %}

{% block content %}
{% csrf_token %}

<div class="mb-3">
    <h1 class="h3 d-inline align-middle">{{titleown}}</h1>
</div>

<div class="row">
    <div class="col-8 " >
        <h6 class="card-subtitle mb-2 text-muted">Birliklar</h6>
        <div class="btn-group btn-group-lg mb-3" role="group" aria-label="Large button group">
            
            <button type="button" class="btn btn-outline-info">Nomli birliklarda</button>
            {% if '7' in his.cheks %}<button type="button" class="btn btn-outline-info">Mln.so'mda</button>{% endif %}       
            {% if '8' in his.cheks %}<button type="button" class="btn btn-outline-info">Ming.dollar</button>{% endif %}
            {% if '9' in his.cheks %}<button type="button" class="btn btn-outline-info">tshy</button>{% endif %} 
            {% if '0' in his.cheks %}<button type="button" class="btn btn-outline-info">tne</button>{% endif %} 
            {% if 'a' in his.cheks %}<button type="button" class="btn btn-outline-info">kKal</button>{% endif %}   
            {% if 'b' in his.cheks %}<button type="button" class="btn btn-outline-info">GJ</button>{% endif %}
            
            
            
        </div>
    </div>

    <div class="col-4">
        <button width="100%"  class="btn btn-outline-warning float-end my-1" id="button" onclick="showhide()"> 
            <i id="graph1" class="align-middle me-2 fas fa-fw fa-eye-slash"></i>
            <i class="align-middle me-2 fas fa-fw fa-chart-line"></i>
        </button>
    </div>
</div>

<div class="col-12 col-lg-12" id="graph" >
    <div class="tab" >
        <ul class="nav nav-tabs" role="tablist">
            {% if '1' in his.cheks %}
            <li class="nav-item">
                <a class="nav-link active" href="#icon-tab-1" data-bs-toggle="tab" role="tab">
                    Ch<i class="align-middle me-2 fas fa-fw fa-chart-line"></i>
                </a>
            </li>{% endif %}
            {% if '2' in his.cheks %}
            <li class="nav-item">
                <a class="nav-link" href="#icon-tab-2" data-bs-toggle="tab" role="tab">
                    V<i class="align-middle me-2 fas fa-fw fa-chart-bar"></i>
                </a>
            </li>{% endif %}
            {% if '3' in his.cheks %}
            <li class="nav-item">
                <a class="nav-link" href="#icon-tab-3" data-bs-toggle="tab" role="tab">
                    G<i class="align-middle me-2 fas fa-fw fa-chart-bar"></i>
                </a>
            </li>{% endif %}
            {% if '4' in his.cheks %}
            <li class="nav-item">
                <a class="nav-link" href="#icon-tab-4" data-bs-toggle="tab" role="tab">
                    M<i class="align-middle me-2 fas fa-fw fa-chart-area"></i>
                </a>
            </li>{% endif %}
            {% if '5' in his.cheks %}
            <li class="nav-item">
                <a class="nav-link" href="#icon-tab-5" data-bs-toggle="tab" role="tab">
                    U<i class="align-middle me-2 fas fa-fw fa-chart-pie"></i>
                </a>
            </li>{% endif %}
            {% if '6' in his.cheks %}
            <li class="nav-item">
                <a class="nav-link" href="#icon-tab-6" data-bs-toggle="tab" role="tab">
                    A<i class="align-middle me-2 fas fa-fw fa-chart-pie"></i>
                </a>
            </li>{% endif %}
            
        </ul>
        <div class="tab-content" style="background: rgb(63,94,251);
        background: linear-gradient(62deg, rgba(63,94,251,0.3351540445279675) 0%, rgba(239,191,254,0.5704481621750263) 4%, rgba(255,255,255,0.7133053050321692) 6%, rgba(255,255,255,1) 18%, rgba(255,255,255,1) 51%, rgba(255,255,255,0.8757702910265669) 89%, rgba(192,192,252,0.7469187504103203) 95%, rgba(243,202,254,0.5928571257604605) 98%, rgba(71,70,252,0.3127450809425333) 100%);">
            <div class="tab-pane active" id="icon-tab-1" role="tabpanel">
                <div class="card-body">
                    <div class="chart w-100">
                        <div id="apexcharts-line"></div>
                    </div>
                </div>
            </div>            
            <div class="tab-pane" id="icon-tab-2" role="tabpanel">                
                <div class="card-body">
                    <div class="chart w-100">
                        <div id="apexcharts-column"></div>
                    </div>
                </div> 
            </div>

            <div class="tab-pane" id="icon-tab-3" role="tabpanel">
                <div class="card-body">
                    <div class="chart w-100">
                        <div id="apexcharts-bar"></div>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="icon-tab-4" role="tabpanel">
                <div class="card-body">
                    <div class="chart w-100">
                        <div id="apexcharts-area"></div>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="icon-tab-5" role="tabpanel">
                <div class="row">
                    
                        <div class="col-3 card-body text-center">
                            <div class="chart w-100">
                                <div id="pie-chart" style="max-width: 440px;margin:auto;"></div>
                            </div>
                        </div>
                   
                </div>

            </div>
            <div class="tab-pane" id="icon-tab-6" role="tabpanel">
                <div class="row">
                    <div class="card-body">
                        <div class="chart w-100">
                            <div id="apexcharts-mixed"></div>
                        </div>
                    </div>
                </div>
            </div>
                
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="card">            
            <div class="card-body">
                <table id="datatables-column-search-select-inputs" class="table table-striped table-bordered" style="width:100%">
                    <thead>
                        <tr>
                            <th>T/r</th>
                            <th>sana</th>
                            {% for v in obj %}                          
                            <th>{{v}}</th>
                            {% endfor %}                              

                        </tr>
                        </thead>
                        <tbody>
                            {% for k,v in obj_table.items %}
                            <tr>
                                <td>{{forloop.counter}}</td>
                                <td>{{k}}</td>
                                {% for i in v %}                          
                                <td>{{i}}</td>                                
                                {% endfor %} 
                            </tr>
                            {% endfor %}                        
                    </tbody>
                    <tfoot>
                        <tr>
                            <th>T/r</th>
                            <th>sana</th>
                            {% for v in obj %}                          
                            <th>{{v}}</th>
                            {% endfor %} 
                        </tr>
                    </tfoot>
                   
                </table>
           
            </div>
        </div>
    </div>
    
    

</div>

{% endblock content %}

{% block scripts %}

<script>  
    function showhide()
    {  
         var div = document.getElementById("newpost");  
         if (div.style.display !== "none") 
         {  
             div.style.display = "none";  
         }  
         else
         {  
             div.style.display = "block";  
         }  
    }  
</script>  

<script>
    document.addEventListener("DOMContentLoaded", function() {
        
        // Line chart
        var options = {
            chart: {
                height: 350,
                type: "line",
                zoom: {
                    enabled: false
                },
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                width: [5, 7, 5],
                curve: "straight",
                dashArray: [0, 8, 5]
            },
            series: [                                
                {% for key, value in obj.items %}
                {   name: "{{key}}",
                    data: {{value}}
                },{% endfor %}               
                
            ],
            markers: {
                size: 0,
                style: "hollow", // full, hollow, inverted
            },
            xaxis: {
                categories: [{% for v in hisobotlar %}"{{v.vaqt|date:"d-m-Y"}}",{% endfor %}],
            },
            yaxis: {
                title: {
                    text: "Birlik"
                }
            },
            tooltip: {
                y: [{
                    title: {
                        formatter: function(val) {
                            return val + " "
                        }
                    }
                }, {
                    title: {
                        formatter: function(val) {
                            return val + " "
                        }
                    }
                }, {
                    title: {
                        formatter: function(val) {
                            return val;
                        }
                    }
                }]
            },
            grid: {
                borderColor: "#f1f1f1",
            }
        }
        var chart = new ApexCharts(
            document.querySelector("#apexcharts-line"),
            options
        );
        chart.render();
    });
</script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Column chart
        var options = {
            chart: {
                height: 350,
                type: "bar",
            },
            plotOptions: {
                bar: {
                    horizontal: false,
                    endingShape: "rounded",
                    columnWidth: "55%",
                },
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                show: true,
                width: 2,
                colors: ["transparent"]
            },
            series: [{% for key, value in obj.items %}
                        {   name: "{{key}}",
                            data: {{value}}
                        },{% endfor %} 
            ],
            xaxis: {
                categories: [{% for v in hisobotlar %}"{{v.vaqt|date:"d-m-Y"}}",{% endfor %}],
            },
            yaxis: {
                title: {
                    text: "Birlik"
                }
            },
            fill: {
                opacity: 1
            },
            tooltip: {
                y: {
                    formatter: function(val) {
                        return "" + val + " "
                    }
                }
            }
        }
        var chart = new ApexCharts(
            document.querySelector("#apexcharts-column"),
            options
        );
        chart.render();
    });
</script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Bar chart
        var options = {
            chart: {
                height: 350,
                type: "bar",
                stacked: true,
            },
            plotOptions: {
                bar: {
                    horizontal: true,
                },
            },
            stroke: {
                width: 1,
                colors: ["#fff"]
            },
            series: [
                        {% for key, value in obj.items %}
                        {   name: "{{key}}",
                            data: {{value}}
                        },{% endfor %} 
            
            ],
            xaxis: {
                categories: [{% for v in hisobotlar %}"{{v.vaqt|date:"d-m-Y"}}",{% endfor %}],
                labels: {
                    formatter: function(val) {
                        return val + ""
                    }
                }
            },
            yaxis: {
                title: {
                    text: undefined
                },
            },
            tooltip: {
                y: {
                    formatter: function(val) {
                        return val + ""
                    }
                }
            },
            fill: {
                opacity: 1
            },
            legend: {
                position: "top",
                horizontalAlign: "left",
                offsetX: 40
            }
        }
        var chart = new ApexCharts(
            document.querySelector("#apexcharts-bar"),
            options
        );
        chart.render();
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Area chart
        var options = {
            chart: {
                height: 350,
                type: "area",
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                curve: "smooth"
            },
            series: [ {% for key, value in obj.items %}
                        {   name: "{{key}}",
                            data: {{value}}
                        },{% endfor %} 
            ],
            xaxis: {
                type: "date",
                categories: [{% for v in hisobotlar %}"{{v.vaqt|date:"d-m-Y"}}",{% endfor %}],
            },
            tooltip: {
                x: {
                    format: "dd-MM-yyyy"
                },
            }
        }
        var chart = new ApexCharts(
            document.querySelector("#apexcharts-area"),
            options
        );
        chart.render();
    });
</script>

<script>
    
    document.addEventListener("DOMContentLoaded", function() {
        // Pie chart
        var options = {
            chart: {
                height: 350,
                type: "donut",
            },
            dataLabels: {
                enabled: true
            },
            series: [{% for i in v %}{{i}},{% endfor %}]
        }
        var chart = new ApexCharts(
            document.querySelector("#pie-chart"),
            options
        );
        chart.render();
    });
    
</script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Heatmap chart
        function generateData(count, yrange) {
            var i = 0;
            var series = [];
            while (i < count) {
                var x = (i + 1).toString();
                var y = Math.floor(Math.random() * (yrange.max - yrange.min + 1)) + yrange.min;
                series.push({
                    x: x,
                    y: y
                });
                i++;
            }
            return series;
        }
        var options = {
            chart: {
                height: 350,
                type: "heatmap",
            },
            dataLabels: {
                enabled: false
            },
            colors: ["#008FFB"],
            series: [{
                    name: "Metric1",
                    data: generateData(20, {
                        min: 0,
                        max: 90
                    })
                },
                {
                    name: "Metric2",
                    data: generateData(20, {
                        min: 0,
                        max: 90
                    })
                },
                {
                    name: "Metric3",
                    data: generateData(20, {
                        min: 0,
                        max: 90
                    })
                },
                {
                    name: "Metric4",
                    data: generateData(20, {
                        min: 0,
                        max: 90
                    })
                },
                {
                    name: "Metric5",
                    data: generateData(20, {
                        min: 0,
                        max: 90
                    })
                },
                {
                    name: "Metric6",
                    data: generateData(20, {
                        min: 0,
                        max: 90
                    })
                },
                {
                    name: "Metric7",
                    data: generateData(20, {
                        min: 0,
                        max: 90
                    })
                },
                {
                    name: "Metric8",
                    data: generateData(20, {
                        min: 0,
                        max: 90
                    })
                },
                {
                    name: "Metric9",
                    data: generateData(20, {
                        min: 0,
                        max: 90
                    })
                }
            ],
            xaxis: {
                type: "category",
            }
        }
        var chart = new ApexCharts(
            document.querySelector("#apexcharts-heatmap"),
            options
        );
        chart.render();
    });
</script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Mixed chart
        var options = {
            chart: {
                height: 350,
                type: "line",
                stacked: false,
            },
            stroke: {
                width: [0, 2, 5],
                curve: "smooth"
            },
            plotOptions: {
                bar: {
                    columnWidth: "50%"
                }
            },
            series: [{
                name: "TEAM A",
                type: "column",
                data: [23, 11, 22, 27, 13, 22, 37, 21, 44, 22, 30]
            }, {
                name: "TEAM B",
                type: "area",
                data: [44, 55, 41, 67, 22, 43, 21, 41, 56, 27, 43]
            }, {
                name: "TEAM C",
                type: "line",
                data: [30, 25, 36, 30, 45, 35, 64, 52, 59, 36, 39]
            }],
            fill: {
                opacity: [0.85, 0.25, 1],
                gradient: {
                    inverseColors: false,
                    shade: "light",
                    type: "vertical",
                    opacityFrom: 0.85,
                    opacityTo: 0.55,
                    stops: [0, 100, 100, 100]
                }
            },
            labels: ["01/01/2003", "02/01/2003", "03/01/2003", "04/01/2003", "05/01/2003", "06/01/2003", "07/01/2003", "08/01/2003", "09/01/2003",
                "10/01/2003", "11/01/2003"
            ],
            markers: {
                size: 0
            },
            xaxis: {
                type: "datetime"
            },
            yaxis: {
                title: {
                    text: "Points",
                },
                min: 0
            },
            tooltip: {
                shared: true,
                intersect: false,
                y: {
                    formatter: function(y) {
                        if (typeof y !== "undefined") {
                            return y.toFixed(0) + " points";
                        }
                        return y;
                    }
                }
            }
        }
        var chart = new ApexCharts(
            document.querySelector("#apexcharts-mixed"), {
                chart: {
                    height: 350,
                    type: "line",
                    stacked: false,
                },
                stroke: {
                    width: [0, 2, 5],
                    curve: "smooth"
                },
                plotOptions: {
                    bar: {
                        columnWidth: "50%"
                    }
                },
                series: [{
                    name: "TEAM A",
                    type: "column",
                    data: [23, 11, 22, 27, 13, 22, 37, 21, 44, 22, 30]
                }, {
                    name: "TEAM B",
                    type: "area",
                    data: [44, 55, 41, 67, 22, 43, 21, 41, 56, 27, 43]
                }, {
                    name: "TEAM C",
                    type: "line",
                    data: [30, 25, 36, 30, 45, 35, 64, 52, 59, 36, 39]
                }],
                fill: {
                    opacity: [0.85, 0.25, 1],
                    gradient: {
                        inverseColors: false,
                        shade: "light",
                        type: "vertical",
                        opacityFrom: 0.85,
                        opacityTo: 0.55,
                        stops: [0, 100, 100, 100]
                    }
                },
                labels: ["01/01/2003", "02/01/2003", "03/01/2003", "04/01/2003", "05/01/2003", "06/01/2003", "07/01/2003", "08/01/2003", "09/01/2003",
                    "10/01/2003", "11/01/2003"
                ],
                markers: {
                    size: 0
                },
                xaxis: {
                    type: "datetime"
                },
                yaxis: {
                    title: {
                        text: "Points",
                    },
                    min: 0
                },
                tooltip: {
                    shared: true,
                    intersect: false,
                    y: {
                        formatter: function(y) {
                            if (typeof y !== "undefined") {
                                return y.toFixed(0) + " points";
                            }
                            return y;
                        }
                    }
                }
            }
        );
        chart.render();
    });
</script>

<script>  
    function showhide() 
    {  
        var div = document.getElementById("graph");
        var i = document.getElementById("graph1");        

        if (div.style.display !== "none") {  
            div.style.display = "none";  
        }  
        if (i.style.display !== "none") {  
            i.style.display = "none";  
        } 
       
        else {  
            div.style.display = "block";  
            i.style.display = "block";             
        }  
    }  
</script>  

{% endblock scripts %}