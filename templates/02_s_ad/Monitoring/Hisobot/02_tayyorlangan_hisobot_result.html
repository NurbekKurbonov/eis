{% extends '02_s_ad/Monitoring/00_base_monitoring.html' %}

{% block title %} {{titleown}} {% endblock title %}

{% block content %}
{% csrf_token %}

<div class="row">
    <div class="col-md-3 col-xl-2">
    
        <div class="card">
            <!--Settinng's navbar-->	
            <div class="list-group list-group-flush gradiyent" role="tablist">
                {% if '1' in his.tur %}	
                <a class="list-group-item list-group-item-action gradiyent {{activecha1}}" href="{% url 'tayyorlangan_result' his.id 'A' 'nomli' id %}" >
                    Ishlab chiqarish
                </a>
                {% endif %}

                {% if '2' in his.tur %}
                <a class="list-group-item list-group-item-action gradiyent {{activecha2}}" href="{% url 'tayyorlangan_result' his.id 'B' 'nomli' id %}" >
                    Iste'mol qilish
                </a>
                {% endif %}         
                {% if '3' in his.tur %}       
                <a class="list-group-item list-group-item-action gradiyent {{activecha3}}" href="{% url 'tayyorlangan_result' his.id 'C' 'nomli' id %}" >
                    Uzatish/sotish
                </a>	
                {% endif %} 					
            </div>
        </div>
    </div>

<div class="col-md-3 col-xl-10">  
    <h1 class="h3 d-inline align-middle yozuv_grad">{{titleown}}</h1>   
    <div class="row">
        <div class="col-10 " >
            <h6 class="card-subtitle mb-2 text-muted">Hisobot oralig'i: </h6>
            <div class="btn-group btn-group-lg mb-3" role="group" aria-label="Large button group">
                
                <a href="{% url 'tayyorlangan_result' his.id tur1 'nomli' id %}" type="button" class="btn btn-outline-info 
                    {% if birl == 'nomli'%} yozuv_grad{% endif %}">Nomli birliklarda</a>

                {% if '7' in his.cheks %}<a href="{% url 'tayyorlangan_result' his.id tur1 'som' id %}" type="button" class="btn btn-outline-info 
                    {% if birl == 'som' %}yozuv_grad {% endif %}" >Mln.so'mda</a>{% endif %} 

                {% if '8' in his.cheks %}<a href="{% url 'tayyorlangan_result' his.id tur1 'valut' id%}" type="button" class="btn btn-outline-info 
                {% if birl == 'valut' %}yozuv_grad {% endif %}">Ming.{{his.valyuta.name}}</a>{% endif %}
                
                {% if '9' in his.cheks %}<a href="{% url 'tayyorlangan_result' his.id tur1 'tshy' id %}" type="button" class="btn btn-outline-info
                    {% if birl == 'tshy' %}yozuv_grad {% endif %}">tshy</a>{% endif %} 

                {% if '0' in his.cheks %}<a href="{% url 'tayyorlangan_result' his.id tur1 'tne' id %}" type="button" class="btn btn-outline-info
                    {% if birl == 'tne' %}yozuv_grad {% endif %}">tne</a>{% endif %}

                {% if 'b' in his.cheks %}<a href="{% url 'tayyorlangan_result' his.id tur1 'gj' id %}" type="button" class="btn btn-outline-info
                    {% if birl == 'gj' %}yozuv_grad {% endif %}">GJ</a>{% endif %}

                {% if 'a' in his.cheks %}<a href="{% url 'tayyorlangan_result' his.id tur1 'gkal' id %}" type="button" class="btn btn-outline-info
                    {% if birl == 'gkal' %}yozuv_grad {% endif %}">GKal</a>{% endif %}   
                
            </div>
        </div>

        <div class="col-2">
            <button width="100%"  class="btn btn-outline-warning float-end my-1" id="button" onclick="showhide()"> 
                <i id="icon" class="align-middle me-2 fas fa-fw fa-eye-slash"></i>
                <i id="icon2" style="display:none"  class="align-middle me-2 fas fa-fw fa-chart-line"></i>
            </button>
        </div>
    </div>
</div>
</div>

<div class="col-12 col-lg-12" id="graph" >
    <div class="tab" >
        <ul class="nav nav-tabs" role="tablist">
            {% if '1' in his.cheks %}
            <li class="nav-item">
                <a class="nav-link active" href="#icon-tab-1" data-bs-toggle="tab" role="tab">
                    Ch<i class="align-middle me-2 fas fa-fw fa-chart-line"></i>
                </a>
            </li>{% endif %}
            {% if '2' in his.cheks %}
            <li class="nav-item">
                <a class="nav-link" href="#icon-tab-2" data-bs-toggle="tab" role="tab">
                    V<i class="align-middle me-2 fas fa-fw fa-chart-bar"></i>
                </a>
            </li>{% endif %}
            {% if '3' in his.cheks %}
            <li class="nav-item">
                <a class="nav-link" href="#icon-tab-3" data-bs-toggle="tab" role="tab">
                    G<i class="align-middle me-2 fas fa-fw fa-chart-bar"></i>
                </a>
            </li>{% endif %}
            {% if '4' in his.cheks %}
            <li class="nav-item">
                <a class="nav-link" href="#icon-tab-4" data-bs-toggle="tab" role="tab">
                    M<i class="align-middle me-2 fas fa-fw fa-chart-area"></i>
                </a>
            </li>{% endif %}
            {% if '5' in his.cheks %}
            <li class="nav-item">
                <a class="nav-link" href="#icon-tab-5" data-bs-toggle="tab" role="tab">
                    U<i class="align-middle me-2 fas fa-fw fa-chart-pie"></i>
                </a>
            </li>{% endif %}
            <!--{% if '6' in his.cheks %}
            <li class="nav-item">
                <a class="nav-link" href="#icon-tab-6" data-bs-toggle="tab" role="tab">
                    A<i class="align-middle me-2 fas fa-fw fa-chart-pie"></i>
                </a>
            </li>{% endif %}-->
            
        </ul>
        <div class="tab-content" style="background: rgb(63,94,251);
        background: linear-gradient(62deg, rgba(63,94,251,0.3351540445279675) 0%, rgba(239,191,254,0.5704481621750263) 4%, rgba(255,255,255,0.7133053050321692) 6%, rgba(255,255,255,1) 18%, rgba(255,255,255,1) 51%, rgba(255,255,255,0.8757702910265669) 89%, rgba(192,192,252,0.7469187504103203) 95%, rgba(243,202,254,0.5928571257604605) 98%, rgba(71,70,252,0.3127450809425333) 100%);">
            <div class="tab-pane active" id="icon-tab-1" role="tabpanel">
                <div class="card-body">
                    <div class="chart w-100">
                        <div id="apexcharts-line"></div>
                    </div>
                </div>
            </div>            
            <div class="tab-pane" id="icon-tab-2" role="tabpanel">                
                <div class="card-body">
                    <div class="chart w-100">
                        <div id="apexcharts-column"></div>
                    </div>
                </div> 
            </div>

            <div class="tab-pane" id="icon-tab-3" role="tabpanel">
                <div class="card-body">
                    <div class="chart w-100">
                        <div id="apexcharts-bar"></div>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="icon-tab-4" role="tabpanel">
                <div class="card-body">
                    <div class="chart w-100">
                        <div id="apexcharts-area"></div>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="icon-tab-5" role="tabpanel">
                <div class="row">                    
                    {% for k, v in obj.items %}    
                    <div class="col-6 card-body text-center">
                            <div class="chart w-100">
                                <div id="pie-chart{{forloop.counter}}" style="max-width: 440px;margin:auto;"></div>
                            </div>
                    </div> 
                    {% endfor %}
                </div>

            </div>
            <div class="tab-pane" id="icon-tab-6" role="tabpanel">
                <div class="row">
                    <div class="card-body">
                        <div class="chart w-100">
                            <div id="apexcharts-mixed"></div>
                        </div>
                    </div>
                </div>
            </div>
                
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="card">            
            <div class="card-body">
                <table id="datatables-buttons" class="table table-striped table-bordered" style="width:100%">
                    <thead>
                        <tr>
                            <th>T/r</th>
                            <th>sana</th>
                            {% for v in sana %}                          
                            <th>{{v}}</th>
                            {% endfor %}                              

                        </tr>
                        </thead>
                        <tbody>
                            {% for k,v in obj.items %}                            
                            <tr>
                                <td>{{forloop.counter}}</td>
                                <td>{{k}}</td>
                                {% for i in v %}                          
                                <td>{{i}}</td>                                
                                {% endfor %} 
                            </tr>
                            {% endfor %}                        
                    </tbody>
                   
                </table>
           
            </div>
        </div>
    </div>
    
    

</div>

{% endblock content %}

{% block scripts %}

<script>  
    function showhide()
    {  
         var div = document.getElementById("newpost");  
         if (div.style.display !== "none") 
         {  
             div.style.display = "none";  
         }  
         else
         {  
             div.style.display = "block";  
         }  
    }  
</script>  

<script>
    document.addEventListener("DOMContentLoaded", function() {
        
        // Line chart
        var options = {
            chart: {
                height: 350,
                type: "line",
                zoom: {
                    enabled: false
                },
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                width: [5, 7, 5],
                curve: "straight",
                dashArray: [0, 8, 5]
            },
            series: [                                
                {% for key, value in obj.items %}
                {   name: "{{key}}",
                    data: {{value}}
                },{% endfor %}               
                
            ],
            markers: {
                size: 5,
                style: "hollow", // full, hollow, inverted
            },
            xaxis: {
                categories: [{% for v in sana %}"{{v}}",{% endfor %}],
            },
            yaxis: {
                title: {
                    text: ""
                }
            },
            tooltip: {
                y: [{
                    title: {
                        formatter: function(val) {
                            return val + " "
                        }
                    }
                }, {
                    title: {
                        formatter: function(val) {
                            return val + " "
                        }
                    }
                }, {
                    title: {
                        formatter: function(val) {
                            return val;
                        }
                    }
                }]
            },
            grid: {
                borderColor: "#f1f1f1",
            }
        }
        var chart = new ApexCharts(
            document.querySelector("#apexcharts-line"),
            options
        );
        chart.render();
    });
</script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Column chart
        var options = {
            chart: {
                height: 350,
                type: "bar",
            },
            plotOptions: {
                bar: {
                    horizontal: false,
                    endingShape: "rounded",
                    columnWidth: "55%",
                },
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                show: true,
                width: 2,
                colors: ["transparent"]
            },
            series: [{% for key, value in obj.items %}
                        {   name: "{{key}}",
                            data: {{value}}
                        },{% endfor %} 
            ],
            xaxis: {
                categories: [{% for i in sana %}"{{i}}",{% endfor %}],
            },
            yaxis: {
                title: {
                    text: ""
                }
            },
            fill: {
                opacity: 1
            },
            tooltip: {
                y: {
                    formatter: function(val) {
                        return "" + val + " "
                    }
                }
            }
        }
        var chart = new ApexCharts(
            document.querySelector("#apexcharts-column"),
            options
        );
        chart.render();
    });
</script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Bar chart
        var options = {
            chart: {
                height: 350,
                type: "bar",
                stacked: true,
            },
            plotOptions: {
                bar: {
                    horizontal: true,
                },
            },
            stroke: {
                width: 1,
                colors: ["#fff"]
            },
            series: [
                        {% for key, value in obj.items %}
                        {   name: "{{key}}",
                            data: {{value}}
                        },{% endfor %} 
            
            ],
            xaxis: {
                categories: [{% for i in sana %}"{{i}}",{% endfor %}],      
            },
            yaxis: {
                title: {
                    text: undefined
                },
            },
            
            fill: {
                opacity: 1
            },
            legend: {
                position: "top",
                horizontalAlign: "left",
                offsetX: 40
            }
        }
        var chart = new ApexCharts(
            document.querySelector("#apexcharts-bar"),
            options
        );
        chart.render();
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Area chart
        var options = {
            chart: {
                height: 350,
                type: "area",
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                curve: "smooth"
            },
            series: [ {% for key, value in obj.items %}
                        {   name: "{{key}}",
                            data: {{value}}
                        },{% endfor %} 
            ],
            xaxis: {
                type: "date",
                categories: [{% for i in sana %}"{{i}}",{% endfor %}],     
            },
            tooltip: {
                x: {
                    format: "yyyy-MM"
                },
            }
        }
        var chart = new ApexCharts(
            document.querySelector("#apexcharts-area"),
            options
        );
        chart.render();
    });
</script>

<script>
    {% for k, v in obj.items %}
    document.addEventListener("DOMContentLoaded", function() {
        // Pie chart
        var options = {
            chart: {
                height: 350,
                type: "pie",
            },
            dataLabels: {
                enabled: true
            },
            title: {
                display: true,
                text: '{{k}}'
            },           
            series: [{% for i in v %}{{i}},{% endfor %}],
            labels: [{% for j in sana %}"{{j}}",{% endfor %}],            
        };
        
        var chart = new ApexCharts(
            document.querySelector("#pie-chart{{forloop.counter}}"),
            options
        );
        
        chart.render();
    });
    {% endfor %}
</script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Datatables with Buttons
        var datatablesButtons = $("#datatables-buttons").DataTable({
            responsive: true,
            lengthChange: !1,
            buttons: ["copy", "print"]
        });
        datatablesButtons.buttons().container().appendTo("#datatables-buttons_wrapper .col-md-6:eq(0)");
    });
</script>
<script>
    const graph = document.getElementById("graph");
    const icon = document.getElementById("icon");
    const icon2 = document.getElementById("icon2");

    const btn = document.getElementById("button");
    btn.onclick = function () {

    if (graph.style.display !== "none") {
    graph.style.display = "none";
    } else {
    graph.style.display = "block";  
    }
    if (icon.style.display !== "none") {
        icon.style.display = "none";
    } else {
        icon.style.display = "block";  
    }
    if (icon2.style.display !== "none") {
        icon2.style.display = "none";
    } else {
        icon2.style.display = "block";  
    }
  
};

</script>
{% endblock scripts %}